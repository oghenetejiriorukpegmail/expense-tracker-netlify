import{r as o,j as e}from"./ui-components-HGHSQozB.js";import{C as x,b as j,c as C,a as g}from"./card-CClv9YG9.js";import"./auto-Sy9Rgk5Q.js";import{C as y}from"./chart-libs-CTFwNvJP.js";import{L as v}from"./loader-circle-DRr2b1ki.js";import"./index-DigxZtx1.js";import"./data-fetching-CsvQ4U53.js";import"./react-vendor-BDjHMAeo.js";import"./auth-DQqL1F4Z.js";function A({expenseData:r,isLoading:s}){const a=o.useRef(null),t=o.useRef(null);return o.useEffect(()=>{if(s||!a.current)return;t.current&&t.current.destroy();const n=Object.keys(r),d=Object.values(r);if(n.length===0)return;const u=["#3b82f6","#10b981","#f59e0b","#8b5cf6","#ec4899","#14b8a6","#6366f1","#f43f5e","#64748b"],l=a.current.getContext("2d");if(l)return t.current=new y(l,{type:"doughnut",data:{labels:n,datasets:[{data:d,backgroundColor:u.slice(0,n.length),borderWidth:1,borderColor:document.documentElement.classList.contains("dark")?"#1f2937":"#ffffff"}]},options:{responsive:!0,maintainAspectRatio:!1,cutout:"65%",plugins:{legend:{position:"bottom",labels:{color:document.documentElement.classList.contains("dark")?"#e5e7eb":"#4b5563",padding:15,usePointStyle:!0,pointStyle:"circle"}},tooltip:{callbacks:{label:function(c){const f=c.label||"",i=c.raw,m=c.dataset.data.reduce((b,h)=>b+h,0),p=Math.round(i/m*100);return`${f}: $${i.toFixed(2)} (${p}%)`}}}}}}),()=>{t.current&&t.current.destroy()}},[r,s]),e.jsxs(x,{className:"h-full",children:[e.jsx(j,{className:"pb-2",children:e.jsx(C,{className:"text-lg",children:"Expense Breakdown"})}),e.jsx(g,{className:"p-4",children:s?e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx(v,{className:"h-8 w-8 animate-spin text-primary"})}):Object.keys(r).length>0?e.jsx("div",{className:"h-64",children:e.jsx("canvas",{ref:a})}):e.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500 dark:text-gray-400",children:"No expense data available"})})]})}export{A as default};
