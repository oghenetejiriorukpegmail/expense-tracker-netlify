const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/expense-chart-CiCM728F.js","assets/ui-components-HGHSQozB.js","assets/card-CClv9YG9.js","assets/index-DigxZtx1.js","assets/data-fetching-CsvQ4U53.js","assets/react-vendor-BDjHMAeo.js","assets/auth-DQqL1F4Z.js","assets/index-ClobUe5q.css","assets/auto-Sy9Rgk5Q.js","assets/chart-libs-CTFwNvJP.js","assets/loader-circle-DRr2b1ki.js","assets/expense-trend-chart-CD5Cowt9.js"])))=>i.map(i=>d[i]);
import{j as e,r as m}from"./ui-components-HGHSQozB.js";import{_ as b,u as h}from"./data-fetching-CsvQ4U53.js";import{S as A}from"./sidebar-CmFT8L_W.js";import{u as D}from"./index-DigxZtx1.js";import{B as g}from"./button-DIi07IbY.js";import{C as N,b as v,c as w,a as k}from"./card-CClv9YG9.js";import{L as E}from"./loader-circle-DRr2b1ki.js";import{T as S}from"./trip-card-BwNvD7VY.js";import{P as F,A as $,a as P,R}from"./receipt-viewer-modal-C3RSGosi.js";import{A as q}from"./animated-page-XK2k_SWk.js";import{f}from"./date-libs-B3w1lJ5d.js";import"./react-vendor-BDjHMAeo.js";import"./auth-DQqL1F4Z.js";import"./alert-dialog-BTH45kxy.js";import"./cloud-upload-Bzd53IsB.js";import"./input-CRt7uJVD.js";import"./form-libs-rs9Sv7dn.js";import"./dialog-C5mG64l5.js";import"./textarea-_oBjrA3M.js";import"./receipt-upload-B52gNKqR.js";import"./trash-2-BesVaEJk.js";import"./file-text-1oqK6nM4.js";import"./upload-glmsZqHP.js";function x({title:a,value:i,icon:p,color:s}){const d={primary:{bg:"bg-blue-100 dark:bg-blue-900/30",text:"text-primary"},secondary:{bg:"bg-emerald-100 dark:bg-emerald-900/30",text:"text-secondary"},accent:{bg:"bg-amber-100 dark:bg-amber-900/30",text:"text-amber-500"},error:{bg:"bg-red-100 dark:bg-red-900/30",text:"text-red-500"}};return e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-3 rounded-full ${d[s].bg} ${d[s].text} mr-4`,children:e.jsx("i",{className:`${p} text-xl`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a}),e.jsx("h3",{className:"text-2xl font-bold",children:i})]})]})})}const V=m.lazy(()=>b(()=>import("./expense-chart-CiCM728F.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10]))),O=()=>e.jsxs(N,{className:"h-full",children:[e.jsx(v,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Expense Breakdown"})}),e.jsx(k,{className:"p-4",children:e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-primary"})})})]});function B(a){return e.jsx(m.Suspense,{fallback:e.jsx(O,{}),children:e.jsx(V,{...a})})}const K=m.lazy(()=>b(()=>import("./expense-trend-chart-CD5Cowt9.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9,10]))),z=()=>e.jsxs(N,{className:"h-full",children:[e.jsx(v,{className:"pb-2",children:e.jsx(w,{className:"text-lg",children:"Expense Trends"})}),e.jsx(k,{className:"p-4",children:e.jsx("div",{className:"h-64 flex items-center justify-center",children:e.jsx(E,{className:"h-8 w-8 animate-spin text-primary"})})})]});function I(a){return e.jsx(m.Suspense,{fallback:e.jsx(z,{}),children:e.jsx(K,{...a})})}function he(){const{toggleAddTrip:a}=D(),{data:i,isLoading:p}=h({queryKey:["/api/profile"],queryFn:async()=>{const r=await fetch("/api/profile");if(!r.ok)throw new Error(`Error fetching profile: ${r.statusText}`);return r.json()}}),{data:s,isLoading:d}=h({queryKey:["/api/expenses"],queryFn:async()=>{const r=await fetch("/api/expenses");if(!r.ok)throw new Error(`Error fetching expenses: ${r.statusText}`);return r.json()}}),{data:l,isLoading:T}=h({queryKey:["/api/trips"],queryFn:async()=>{const r=await fetch("/api/trips");if(!r.ok)throw new Error(`Error fetching trips: ${r.statusText}`);return r.json()}}),n=d||T||p,C=`Welcome ${(i==null?void 0:i.firstName)||"User"}`,c={trips:(l==null?void 0:l.length)||0,expenses:(s==null?void 0:s.length)||0,spent:s?s.reduce((r,t)=>r+(typeof t.cost=="number"?t.cost:parseFloat(t.cost)),0).toFixed(2):"0.00",receipts:s?s.filter(r=>r.receiptPath).length:0},y=s?s.slice(0,4):[],j=l?l.slice(0,3):[],L=s?s.reduce((r,t)=>{const o=typeof t.cost=="number"?t.cost:parseFloat(t.cost);return r[t.type]=(r[t.type]||0)+o,r},{}):{},u=s?s.reduce((r,t)=>{const o=f(new Date(t.date),"MMM"),_=typeof t.cost=="number"?t.cost:parseFloat(t.cost);return r[o]=(r[o]||0)+_,r},{}):{},M={labels:Object.keys(u),data:Object.values(u)};return e.jsxs("div",{className:"flex flex-col md:flex-row h-screen",children:[e.jsx(A,{}),e.jsxs(q,{className:"flex-1 overflow-y-auto p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2 md:mb-0",children:"Dashboard Overview"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:C}),e.jsxs(g,{className:"bg-primary text-primary-foreground hover:bg-primary/90",onClick:a,children:[e.jsx(F,{className:"h-4 w-4 mr-2"})," Add Trip"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsx(x,{title:"Total Trips",value:c.trips.toString(),icon:"ri-suitcase-line",color:"primary"}),e.jsx(x,{title:"Total Expenses",value:c.expenses.toString(),icon:"ri-receipt-line",color:"secondary"}),e.jsx(x,{title:"Total Spent",value:`$${c.spent}`,icon:"ri-money-dollar-circle-line",color:"error"}),e.jsx(x,{title:"Receipts Processed",value:c.receipts.toString(),icon:"ri-file-list-3-line",color:"accent"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(B,{expenseData:L,isLoading:n})}),e.jsx("div",{className:"col-span-2",children:e.jsx(I,{trendData:M,isLoading:n})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Recent Expenses"}),e.jsx(g,{variant:"link",className:"text-primary hover:underline text-sm font-medium p-0",asChild:!0,children:e.jsx("a",{href:"/expenses",children:"View All"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b dark:border-gray-700",children:[e.jsx("th",{className:"text-left py-3 px-2 text-xs uppercase text-gray-500 dark:text-gray-400 font-medium",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-2 text-xs uppercase text-gray-500 dark:text-gray-400 font-medium",children:"Vendor"}),e.jsx("th",{className:"text-left py-3 px-2 text-xs uppercase text-gray-500 dark:text-gray-400 font-medium",children:"Trip"}),e.jsx("th",{className:"text-right py-3 px-2 text-xs uppercase text-gray-500 dark:text-gray-400 font-medium",children:"Amount"})]})}),e.jsx("tbody",{children:n?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-4 text-center text-gray-500 dark:text-gray-400",children:"Loading recent expenses..."})}):y.length>0?y.map(r=>e.jsxs("tr",{className:"border-b dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/30",children:[e.jsx("td",{className:"py-3 px-2 whitespace-nowrap",children:f(new Date(r.date),"MMM d, yyyy")}),e.jsx("td",{className:"py-3 px-2 whitespace-nowrap",children:r.vendor}),e.jsx("td",{className:"py-3 px-2 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-primary text-xs rounded-full",children:r.tripName})}),e.jsxs("td",{className:"py-3 px-2 whitespace-nowrap text-right font-medium",children:["$",(parseFloat(r.cost)||0).toFixed(2)]})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"py-4 text-center text-gray-500 dark:text-gray-400",children:"No expenses added yet"})})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Recent Trips"}),e.jsx(g,{variant:"link",className:"text-primary hover:underline text-sm font-medium p-0",asChild:!0,children:e.jsx("a",{href:"/trips",children:"View All"})})]}),e.jsx("div",{className:"space-y-4",children:n?e.jsx("div",{className:"py-4 text-center text-gray-500 dark:text-gray-400",children:"Loading recent trips..."}):j.length>0?j.map(r=>e.jsx(S,{trip:r},r.id)):e.jsx("div",{className:"py-4 text-center text-gray-500 dark:text-gray-400",children:"No trips added yet"})})]})]})]}),e.jsx($,{}),e.jsx(P,{}),e.jsx(R,{})]})}export{he as default};
