import{r as i,j as e,X as T,Y as w,Z as v,$ as f}from"./ui-components-HGHSQozB.js";import{c as D,d,u as C,a as A,q as R}from"./index-DigxZtx1.js";import{u as I,B as h}from"./button-DIi07IbY.js";import{A as k,a as E,b as M,c as z,d as L,e as O,f as U,g as F,h as H}from"./alert-dialog-BTH45kxy.js";import{I as g,T as P}from"./trash-2-BesVaEJk.js";import{f as S}from"./date-libs-B3w1lJ5d.js";import"./data-fetching-CsvQ4U53.js";import"./react-vendor-BDjHMAeo.js";import"./auth-DQqL1F4Z.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=D("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]),u=i.forwardRef(({className:a,...t},s)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:s,className:d("w-full caption-bottom text-sm",a),...t})}));u.displayName="Table";const b=i.forwardRef(({className:a,...t},s)=>e.jsx("thead",{ref:s,className:d("[&_tr]:border-b",a),...t}));b.displayName="TableHeader";const N=i.forwardRef(({className:a,...t},s)=>e.jsx("tbody",{ref:s,className:d("[&_tr:last-child]:border-0",a),...t}));N.displayName="TableBody";const B=i.forwardRef(({className:a,...t},s)=>e.jsx("tfoot",{ref:s,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t}));B.displayName="TableFooter";const m=i.forwardRef(({className:a,...t},s)=>e.jsx("tr",{ref:s,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t}));m.displayName="TableRow";const l=i.forwardRef(({className:a,...t},s)=>e.jsx("th",{ref:s,className:d("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t}));l.displayName="TableHead";const o=i.forwardRef(({className:a,...t},s)=>e.jsx("td",{ref:s,className:d("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t}));o.displayName="TableCell";const _=i.forwardRef(({className:a,...t},s)=>e.jsx("caption",{ref:s,className:d("mt-4 text-sm text-muted-foreground",a),...t}));_.displayName="TableCaption";const V=T,j=w,p=v,x=i.forwardRef(({className:a,sideOffset:t=4,...s},n)=>e.jsx(f,{ref:n,sideOffset:t,className:d("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...s}));x.displayName=f.displayName;function ee({logs:a,isLoading:t}){const{toggleAddEditMileageLog:s}=C(),{toast:n}=I(),y=async r=>{try{await A("DELETE",`/api/mileage-logs/${r}`),n({title:"Mileage Log Deleted",description:"The mileage log has been successfully deleted."}),R.invalidateQueries({queryKey:["/api/mileage-logs"]})}catch(c){console.error("Failed to delete mileage log:",c),n({title:"Delete Failed",description:c instanceof Error?c.message:"Could not delete mileage log.",variant:"destructive"})}};return t?e.jsx("div",{children:"Loading mileage logs..."}):!a||a.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 mt-4",children:"No mileage logs found."}):e.jsxs(V,{children:[" ",e.jsx("div",{className:"rounded-md border mt-4",children:e.jsxs(u,{children:[e.jsx(b,{children:e.jsxs(m,{children:[e.jsx(l,{children:"Date"}),e.jsx(l,{className:"text-right",children:"Start Odometer"}),e.jsx(l,{className:"text-center",children:"Start Img"})," ",e.jsx(l,{className:"text-right",children:"End Odometer"}),e.jsx(l,{className:"text-center",children:"End Img"}),"   ",e.jsx(l,{className:"text-right",children:"Distance"}),e.jsx(l,{children:"Purpose"}),e.jsx(l,{className:"text-center",children:"Entry"})," ",e.jsx(l,{className:"text-center",children:"Actions"})]})}),e.jsx(N,{children:a.map(r=>e.jsxs(m,{children:[e.jsx(o,{children:S(new Date(r.tripDate),"MMM d, yyyy")}),e.jsx(o,{className:"text-right",children:r.startOdometer}),e.jsx(o,{className:"text-center",children:r.startImageUrl?e.jsxs(j,{children:[e.jsx(p,{asChild:!0,children:e.jsx("a",{href:r.startImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:e.jsx("img",{src:r.startImageUrl,alt:"Start Odometer",className:"h-8 w-auto object-cover rounded hover:opacity-80 transition-opacity"})})}),e.jsx(x,{children:e.jsx("p",{children:"View Start Image"})})]}):e.jsx(g,{className:"h-5 w-5 text-gray-400 mx-auto"})}),e.jsx(o,{className:"text-right",children:r.endOdometer}),e.jsx(o,{className:"text-center",children:r.endImageUrl?e.jsxs(j,{children:[e.jsx(p,{asChild:!0,children:e.jsx("a",{href:r.endImageUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block",children:e.jsx("img",{src:r.endImageUrl,alt:"End Odometer",className:"h-8 w-auto object-cover rounded hover:opacity-80 transition-opacity"})})}),e.jsx(x,{children:e.jsx("p",{children:"View End Image"})})]}):e.jsx(g,{className:"h-5 w-5 text-gray-400 mx-auto"})}),e.jsx(o,{className:"text-right",children:r.calculatedDistance}),e.jsx(o,{children:r.purpose||"-"}),e.jsx(o,{className:"text-center capitalize",children:r.entryMethod})," ",e.jsxs(o,{className:"text-center",children:[e.jsx(h,{variant:"ghost",size:"icon",className:"mr-2",onClick:()=>s({log:r}),children:e.jsx(q,{className:"h-4 w-4"})}),e.jsxs(k,{children:[e.jsx(E,{asChild:!0,children:e.jsx(h,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",children:e.jsx(P,{className:"h-4 w-4"})})}),e.jsxs(M,{children:[e.jsxs(z,{children:[e.jsx(L,{children:"Delete Mileage Log"}),e.jsx(O,{children:"Are you sure you want to delete this mileage log? This action cannot be undone. Associated images will also be deleted."})]}),e.jsxs(U,{children:[e.jsx(F,{children:"Cancel"}),e.jsx(H,{className:"bg-red-500 hover:bg-red-600",onClick:()=>y(r.id),children:"Delete"})]})]})]})]})]},r.id))})]})})]})}export{ee as default};
