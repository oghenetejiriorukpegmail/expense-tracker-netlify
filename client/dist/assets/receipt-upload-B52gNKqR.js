import{r,j as a}from"./ui-components-HGHSQozB.js";import{u as j,B as N}from"./button-DIi07IbY.js";import{I as k,T as D}from"./trash-2-BesVaEJk.js";import{F as g}from"./file-text-1oqK6nM4.js";import{L as w}from"./loader-circle-DRr2b1ki.js";import{U as P}from"./upload-glmsZqHP.js";function U({onFileSelect:s,selectedFile:i}){const{toast:n}=j(),[p,d]=r.useState(!1),[x,o]=r.useState(!1),[m,c]=r.useState(null),u=e=>["image/jpeg","image/png","image/gif","application/pdf"].includes(e.type)?e.size>10*1024*1024?(n({title:"File too large",description:"Maximum file size is 10MB.",variant:"destructive"}),!1):!0:(n({title:"Invalid file type",description:"Please upload a JPG, PNG, GIF, or PDF file.",variant:"destructive"}),!1),l=r.useCallback(e=>{if(u(e)){if(o(!0),e.type.startsWith("image/")){const t=new FileReader;t.onload=()=>{c(t.result),o(!1)},t.readAsDataURL(e)}else c(null),o(!1);s(e)}},[s,n]),f=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),d(!0)},[]),h=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),d(!1)},[]),y=r.useCallback(e=>{if(e.preventDefault(),e.stopPropagation(),d(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0){const t=e.dataTransfer.files[0];l(t)}},[l]),v=r.useCallback(e=>{if(e.target.files&&e.target.files.length>0){const t=e.target.files[0];l(t)}},[l]),b=r.useCallback(()=>{c(null),s(null)},[s]);return a.jsx("div",{className:"mt-1",children:i?a.jsxs("div",{className:"border-2 border-gray-300 dark:border-gray-600 rounded-md p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[i.type.startsWith("image/")?a.jsx(k,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-2"}):a.jsx(g,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-2"}),a.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:i.name})]}),a.jsx(N,{variant:"ghost",size:"sm",onClick:b,children:a.jsx(D,{className:"h-4 w-4 text-red-500"})})]}),x?a.jsx("div",{className:"h-40 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded",children:a.jsx(w,{className:"h-8 w-8 animate-spin text-primary"})}):m?a.jsx("div",{className:"h-40 flex items-center justify-center bg-gray-100 dark:bg-gray-800 rounded overflow-hidden",children:a.jsx("img",{src:m,alt:"Receipt preview",className:"max-h-full max-w-full object-contain"})}):a.jsxs("div",{className:"h-40 flex flex-col items-center justify-center bg-gray-100 dark:bg-gray-800 rounded",children:[a.jsx(g,{className:"h-12 w-12 text-gray-400 mb-2"}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"PDF document"})]})]}):a.jsx("div",{className:`mt-1 flex justify-center px-6 pt-5 pb-6 border-2 ${p?"border-primary border-dashed bg-blue-50 dark:bg-blue-900/20":"border-gray-300 dark:border-gray-600 border-dashed hover:bg-gray-50 dark:hover:bg-gray-700/30"} rounded-md transition-colors cursor-pointer`,onDragOver:f,onDragLeave:h,onDrop:y,onClick:()=>{var e;return(e=document.getElementById("file-upload"))==null?void 0:e.click()},children:a.jsxs("div",{className:"space-y-1 text-center",children:[a.jsx(P,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsxs("div",{className:"flex text-sm text-gray-600 dark:text-gray-400",children:[a.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md font-medium text-primary hover:text-blue-600",children:[a.jsx("span",{children:"Upload a file"}),a.jsx("input",{id:"file-upload",name:"file-upload",type:"file",className:"sr-only",accept:"image/*,application/pdf",onChange:v})]}),a.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PNG, JPG, PDF up to 10MB"})]})})})}export{U as R};
