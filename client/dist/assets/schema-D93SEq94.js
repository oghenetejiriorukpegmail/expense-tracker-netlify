var Es=Object.defineProperty;var Us=(t,e,r)=>e in t?Es(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var i=(t,e,r)=>Us(t,typeof e!="symbol"?e+"":e,r);import{a as w}from"./form-libs-rs9Sv7dn.js";const s=Symbol.for("drizzle:entityKind");function P(t,e){if(!t||typeof t!="object")return!1;if(t instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,s))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(s in r&&r[s]===e[s])return!0;r=Object.getPrototypeOf(r)}return!1}var oe;oe=s;class A{constructor(e,r){i(this,"name");i(this,"keyAsName");i(this,"primary");i(this,"notNull");i(this,"default");i(this,"defaultFn");i(this,"onUpdateFn");i(this,"hasDefault");i(this,"isUnique");i(this,"uniqueName");i(this,"uniqueType");i(this,"dataType");i(this,"columnType");i(this,"enumValues");i(this,"generated");i(this,"generatedIdentity");i(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}i(A,oe,"Column");var ue;ue=s;class Jn{constructor(e,r,n){i(this,"config");i(this,"$default",this.$defaultFn);i(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:n,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}i(Jn,ue,"ColumnBuilder");const V=Symbol.for("drizzle:Name");var le;le=s;class Wn{constructor(e,r){i(this,"reference");i(this,"_onUpdate","no action");i(this,"_onDelete","no action");this.reference=()=>{const{name:n,columns:a,foreignColumns:o}=e();return{name:n,columns:a,foreignTable:o[0].table,foreignColumns:o}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Hn(e,this)}}i(Wn,le,"PgForeignKeyBuilder");var ce;ce=s;class Hn{constructor(e,r){i(this,"reference");i(this,"onUpdate");i(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:n}=this.reference(),a=r.map(g=>g.name),o=n.map(g=>g.name),l=[this.table[V],...a,n[0].table[V],...o];return e??`${l.join("_")}_fk`}}i(Hn,ce,"PgForeignKey");function $s(t,...e){return t(...e)}function Os(t,e){return`${t[V]}_${e.join("_")}_unique`}function te(t,e,r){for(let n=e;n<t.length;n++){const a=t[n];if(a==="\\"){n++;continue}if(a==='"')return[t.slice(e,n).replace(/\\/g,""),n+1];if(!r&&(a===","||a==="}"))return[t.slice(e,n).replace(/\\/g,""),n]}return[t.slice(e).replace(/\\/g,""),t.length]}function Yn(t,e=0){const r=[];let n=e,a=!1;for(;n<t.length;){const o=t[n];if(o===","){(a||n===e)&&r.push(""),a=!0,n++;continue}if(a=!1,o==="\\"){n+=2;continue}if(o==='"'){const[d,h]=te(t,n+1,!0);r.push(d),n=h;continue}if(o==="}")return[r,n+1];if(o==="{"){const[d,h]=Yn(t,n+1);r.push(d),n=h;continue}const[l,g]=te(t,n,!1);r.push(l),n=g}return[r,n]}function js(t){const[e]=Yn(t,1);return e}function Zn(t){return`{${t.map(e=>Array.isArray(e)?Zn(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var me,de;class m extends(de=Jn,me=s,de){constructor(){super(...arguments);i(this,"foreignKeyConfigs",[])}array(r){return new ei(this.config.name,this,r)}references(r,n={}){return this.foreignKeyConfigs.push({ref:r,actions:n}),this}unique(r,n){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=n==null?void 0:n.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,n){return this.foreignKeyConfigs.map(({ref:a,actions:o})=>$s((l,g)=>{const d=new Wn(()=>{const h=l();return{columns:[r],foreignColumns:[h]}});return g.onUpdate&&d.onUpdate(g.onUpdate),g.onDelete&&d.onDelete(g.onDelete),d.build(n)},a,o))}buildExtraConfigColumn(r){return new kn(r,this.config)}}i(m,me,"PgColumnBuilder");var ge,pe;class c extends(pe=A,ge=s,pe){constructor(e,r){r.uniqueName||(r.uniqueName=Os(e,[r.name])),super(e,r),this.table=e}}i(c,ge,"PgColumn");var fe,he;class kn extends(he=c,fe=s,he){constructor(){super(...arguments);i(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});i(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}i(kn,fe,"ExtraConfigColumn");var ye,be;class ei extends(be=m,ye=s,be){constructor(e,r,n){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=n}build(e){const r=this.config.baseBuilder.build(e);return new W(e,this.config,r)}}i(ei,ye,"PgArrayBuilder");var Se,Ne;const G=class G extends(Ne=c,Se=s,Ne){constructor(r,n,a,o){super(r,n);i(this,"size");this.baseColumn=a,this.range=o,this.size=n.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=js(r)),r.map(n=>this.baseColumn.mapFromDriverValue(n))}mapToDriverValue(r,n=!1){const a=r.map(o=>o===null?null:P(this.baseColumn,G)?this.baseColumn.mapToDriverValue(o,!0):this.baseColumn.mapToDriverValue(o));return n?a:Zn(a)}};i(G,Se,"PgArray");let W=G;const H=Symbol.for("drizzle:isPgEnum");function Xs(t){return!!t&&typeof t=="function"&&H in t&&t[H]===!0}var Te,Pe;class ti extends(Pe=m,Te=s,Pe){constructor(e,r){super(e,"string","PgEnumColumn"),this.config.enum=r}build(e){return new ri(e,this.config)}}i(ti,Te,"PgEnumColumnBuilder");var we,Ie;class ri extends(Ie=c,we=s,Ie){constructor(r,n){super(r,n);i(this,"enum",this.config.enum);i(this,"enumValues",this.config.enum.enumValues);this.enum=n.enum}getSQLType(){return this.enum.enumName}}i(ri,we,"PgEnumColumn");function Z(t,e){return Gs(t,e,void 0)}function Gs(t,e,r){const n=Object.assign(a=>new ti(a??"",n),{enumName:t,enumValues:e,schema:r,[H]:!0});return n}var xe;xe=s;class k{constructor(e,r,n,a=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:n,isWith:a}}}i(k,xe,"Subquery");const Ks={startActiveSpan(t,e){return e()}},B=Symbol.for("drizzle:ViewBaseConfig"),K=Symbol.for("drizzle:Schema"),re=Symbol.for("drizzle:Columns"),ne=Symbol.for("drizzle:ExtraConfigColumns"),R=Symbol.for("drizzle:OriginalName"),J=Symbol.for("drizzle:BaseName"),U=Symbol.for("drizzle:IsAlias"),ie=Symbol.for("drizzle:ExtraConfigBuilder"),ni=Symbol.for("drizzle:IsDrizzleTable");var De,Ce,_e,Ve,Be,Ae,ze,ve,Fe,Le;Le=s,Fe=V,ve=R,ze=K,Ae=re,Be=ne,Ve=J,_e=U,Ce=ni,De=ie;class I{constructor(e,r,n){i(this,Fe);i(this,ve);i(this,ze);i(this,Ae);i(this,Be);i(this,Ve);i(this,_e,!1);i(this,Ce,!0);i(this,De);this[V]=this[R]=e,this[K]=r,this[J]=n}}i(I,Le,"Table"),i(I,"Symbol",{Name:V,Schema:K,OriginalName:R,Columns:re,ExtraConfigColumns:ne,BaseName:J,IsAlias:U,ExtraConfigBuilder:ie});function ii(t){return typeof t=="object"&&t!==null&&ni in t}function Rs(t){return t!=null&&typeof t.getSQL=="function"}function Js(t){var r;const e={sql:"",params:[]};for(const n of t)e.sql+=n.sql,e.params.push(...n.params),(r=n.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...n.typings));return e}var Me;Me=s;class x{constructor(e){i(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new S([this])}}i(x,Me,"StringChunk");var Qe;Qe=s;const _=class _{constructor(e){i(this,"decoder",si);i(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Ks.startActiveSpan("drizzle.buildSQL",r=>{const n=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":n.sql,"drizzle.query.params":JSON.stringify(n.params)}),n})}buildQueryFromSourceParams(e,r){const n=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:a,escapeName:o,escapeParam:l,prepareTyping:g,inlineParams:d,paramStartIndex:h}=n;return Js(e.map(u=>{var D;if(P(u,x))return{sql:u.value.join(""),params:[]};if(P(u,$))return{sql:o(u.value),params:[]};if(u===void 0)return{sql:"",params:[]};if(Array.isArray(u)){const p=[new x("(")];for(const[N,qs]of u.entries())p.push(qs),N<u.length-1&&p.push(new x(", "));return p.push(new x(")")),this.buildQueryFromSourceParams(p,n)}if(P(u,_))return this.buildQueryFromSourceParams(u.queryChunks,{...n,inlineParams:d||u.shouldInlineParams});if(P(u,I)){const p=u[I.Symbol.Schema],N=u[I.Symbol.Name];return{sql:p===void 0||u[U]?o(N):o(p)+"."+o(N),params:[]}}if(P(u,A)){const p=a.getColumnCasing(u);if(r.invokeSource==="indexes")return{sql:o(p),params:[]};const N=u.table[I.Symbol.Schema];return{sql:u.table[U]||N===void 0?o(u.table[I.Symbol.Name])+"."+o(p):o(N)+"."+o(u.table[I.Symbol.Name])+"."+o(p),params:[]}}if(P(u,ui)){const p=u[B].schema,N=u[B].name;return{sql:p===void 0||u[B].isAlias?o(N):o(p)+"."+o(N),params:[]}}if(P(u,ee)){if(P(u.value,j))return{sql:l(h.value++,u),params:[u],typings:["none"]};const p=u.value===null?null:u.encoder.mapToDriverValue(u.value);if(P(p,_))return this.buildQueryFromSourceParams([p],n);if(d)return{sql:this.mapInlineParam(p,n),params:[]};let N=["none"];return g&&(N=[g(u.encoder)]),{sql:l(h.value++,p),params:[p],typings:N}}return P(u,j)?{sql:l(h.value++,u),params:[u],typings:["none"]}:P(u,_.Aliased)&&u.fieldAlias!==void 0?{sql:o(u.fieldAlias),params:[]}:P(u,k)?u._.isWith?{sql:o(u._.alias),params:[]}:this.buildQueryFromSourceParams([new x("("),u._.sql,new x(") "),new $(u._.alias)],n):Xs(u)?u.schema?{sql:o(u.schema)+"."+o(u.enumName),params:[]}:{sql:o(u.enumName),params:[]}:Rs(u)?(D=u.shouldOmitSQLParens)!=null&&D.call(u)?this.buildQueryFromSourceParams([u.getSQL()],n):this.buildQueryFromSourceParams([new x("("),u.getSQL(),new x(")")],n):d?{sql:this.mapInlineParam(u,n),params:[]}:{sql:l(h.value++,u),params:[u],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const n=e.toString();return r(n==="[object Object]"?JSON.stringify(e):n)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new _.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};i(_,Qe,"SQL");let S=_;var qe;qe=s;class ${constructor(e){i(this,"brand");this.value=e}getSQL(){return new S([this])}}i($,qe,"Name");const si={mapFromDriverValue:t=>t},ai={mapToDriverValue:t=>t};({...si,...ai});var Ee;Ee=s;class ee{constructor(e,r=ai){i(this,"brand");this.value=e,this.encoder=r}getSQL(){return new S([this])}}i(ee,Ee,"Param");function O(t,...e){const r=[];(e.length>0||t.length>0&&t[0]!=="")&&r.push(new x(t[0]));for(const[n,a]of e.entries())r.push(a,new x(t[n+1]));return new S(r)}(t=>{function e(){return new S([])}t.empty=e;function r(d){return new S(d)}t.fromList=r;function n(d){return new S([new x(d)])}t.raw=n;function a(d,h){const u=[];for(const[D,p]of d.entries())D>0&&h!==void 0&&u.push(h),u.push(p);return new S(u)}t.join=a;function o(d){return new $(d)}t.identifier=o;function l(d){return new j(d)}t.placeholder=l;function g(d,h){return new ee(d,h)}t.param=g})(O||(O={}));(t=>{var r;r=s;const n=class n{constructor(o,l){i(this,"isSelectionField",!1);this.sql=o,this.fieldAlias=l}getSQL(){return this.sql}clone(){return new n(this.sql,this.fieldAlias)}};i(n,r,"SQL.Aliased");let e=n;t.Aliased=e})(S||(S={}));var Ue;Ue=s;class j{constructor(e){this.name=e}getSQL(){return new S([this])}}i(j,Ue,"Placeholder");const oi=Symbol.for("drizzle:IsDrizzleView");var $e,Oe,je;je=s,Oe=B,$e=oi;class ui{constructor({name:e,schema:r,selectedFields:n,query:a}){i(this,Oe);i(this,$e,!0);this[B]={name:e,originalName:e,schema:r,selectedFields:n,query:a,isExisting:!a,isAlias:!1}}getSQL(){return new S([this])}}i(ui,je,"View");function Ws(t){return typeof t=="object"&&t!==null&&oi in t}A.prototype.getSQL=function(){return new S([this])};I.prototype.getSQL=function(){return new S([this])};k.prototype.getSQL=function(){return new S([this])};function Hs(t){return t[I.Symbol.Columns]}function Ys(t){return t[B].selectedFields}function T(t,e){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:e}}var Xe,Ge;class M extends(Ge=m,Xe=s,Ge){generatedAlwaysAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...n}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:n}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}i(M,Xe,"PgIntColumnBaseBuilder");var Ke,Re;class li extends(Re=M,Ke=s,Re){constructor(e){super(e,"number","PgBigInt53")}build(e){return new ci(e,this.config)}}i(li,Ke,"PgBigInt53Builder");var Je,We;class ci extends(We=c,Je=s,We){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(ci,Je,"PgBigInt53");var He,Ye;class mi extends(Ye=M,He=s,Ye){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new di(e,this.config)}}i(mi,He,"PgBigInt64Builder");var Ze,ke;class di extends(ke=c,Ze=s,ke){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}i(di,Ze,"PgBigInt64");function Zs(t,e){const{name:r,config:n}=T(t,e);return n.mode==="number"?new li(r):new mi(r)}var et,tt;class gi extends(tt=m,et=s,tt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new pi(e,this.config)}}i(gi,et,"PgBigSerial53Builder");var rt,nt;class pi extends(nt=c,rt=s,nt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}i(pi,rt,"PgBigSerial53");var it,st;class fi extends(st=m,it=s,st){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new hi(e,this.config)}}i(fi,it,"PgBigSerial64Builder");var at,ot;class hi extends(ot=c,at=s,ot){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}i(hi,at,"PgBigSerial64");function ks(t,e){const{name:r,config:n}=T(t,e);return n.mode==="number"?new gi(r):new fi(r)}var ut,lt;class yi extends(lt=m,ut=s,lt){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new bi(e,this.config)}}i(yi,ut,"PgBooleanBuilder");var ct,mt;class bi extends(mt=c,ct=s,mt){getSQLType(){return"boolean"}}i(bi,ct,"PgBoolean");function ea(t){return new yi(t??"")}var dt,gt;class Si extends(gt=m,dt=s,gt){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Ni(e,this.config)}}i(Si,dt,"PgCharBuilder");var pt,ft;class Ni extends(ft=c,pt=s,ft){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}i(Ni,pt,"PgChar");function ta(t,e={}){const{name:r,config:n}=T(t,e);return new Si(r,n)}var ht,yt;class Ti extends(yt=m,ht=s,yt){constructor(e){super(e,"string","PgCidr")}build(e){return new Pi(e,this.config)}}i(Ti,ht,"PgCidrBuilder");var bt,St;class Pi extends(St=c,bt=s,St){getSQLType(){return"cidr"}}i(Pi,bt,"PgCidr");function ra(t){return new Ti(t??"")}var Nt,Tt;class wi extends(Tt=m,Nt=s,Tt){constructor(e,r,n){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=n}build(e){return new Ii(e,this.config)}}i(wi,Nt,"PgCustomColumnBuilder");var Pt,wt;class Ii extends(wt=c,Pt=s,wt){constructor(r,n){super(r,n);i(this,"sqlName");i(this,"mapTo");i(this,"mapFrom");this.sqlName=n.customTypeParams.dataType(n.fieldConfig),this.mapTo=n.customTypeParams.toDriver,this.mapFrom=n.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}i(Ii,Pt,"PgCustomColumn");function na(t){return(e,r)=>{const{name:n,config:a}=T(e,r);return new wi(n,a,t)}}var It,xt;class v extends(xt=m,It=s,xt){defaultNow(){return this.default(O`now()`)}}i(v,It,"PgDateColumnBaseBuilder");var Dt,Ct;class xi extends(Ct=v,Dt=s,Ct){constructor(e){super(e,"date","PgDate")}build(e){return new Di(e,this.config)}}i(xi,Dt,"PgDateBuilder");var _t,Vt;class Di extends(Vt=c,_t=s,Vt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}i(Di,_t,"PgDate");var Bt,At;class Ci extends(At=v,Bt=s,At){constructor(e){super(e,"string","PgDateString")}build(e){return new _i(e,this.config)}}i(Ci,Bt,"PgDateStringBuilder");var zt,vt;class _i extends(vt=c,zt=s,vt){getSQLType(){return"date"}}i(_i,zt,"PgDateString");function ia(t,e){const{name:r,config:n}=T(t,e);return(n==null?void 0:n.mode)==="date"?new xi(r):new Ci(r)}var Ft,Lt;class Vi extends(Lt=m,Ft=s,Lt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Bi(e,this.config)}}i(Vi,Ft,"PgDoublePrecisionBuilder");var Mt,Qt;class Bi extends(Qt=c,Mt=s,Qt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}i(Bi,Mt,"PgDoublePrecision");function sa(t){return new Vi(t??"")}var qt,Et;class Ai extends(Et=m,qt=s,Et){constructor(e){super(e,"string","PgInet")}build(e){return new zi(e,this.config)}}i(Ai,qt,"PgInetBuilder");var Ut,$t;class zi extends($t=c,Ut=s,$t){getSQLType(){return"inet"}}i(zi,Ut,"PgInet");function aa(t){return new Ai(t??"")}var Ot,jt;class vi extends(jt=M,Ot=s,jt){constructor(e){super(e,"number","PgInteger")}build(e){return new Fi(e,this.config)}}i(vi,Ot,"PgIntegerBuilder");var Xt,Gt;class Fi extends(Gt=c,Xt=s,Gt){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}i(Fi,Xt,"PgInteger");function z(t){return new vi(t??"")}var Kt,Rt;class Li extends(Rt=m,Kt=s,Rt){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Mi(e,this.config)}}i(Li,Kt,"PgIntervalBuilder");var Jt,Wt;class Mi extends(Wt=c,Jt=s,Wt){constructor(){super(...arguments);i(this,"fields",this.config.intervalConfig.fields);i(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",n=this.precision?`(${this.precision})`:"";return`interval${r}${n}`}}i(Mi,Jt,"PgInterval");function oa(t,e={}){const{name:r,config:n}=T(t,e);return new Li(r,n)}var Ht,Yt;class Qi extends(Yt=m,Ht=s,Yt){constructor(e){super(e,"json","PgJson")}build(e){return new qi(e,this.config)}}i(Qi,Ht,"PgJsonBuilder");var Zt,kt;class qi extends(kt=c,Zt=s,kt){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(qi,Zt,"PgJson");function ua(t){return new Qi(t??"")}var er,tr;class Ei extends(tr=m,er=s,tr){constructor(e){super(e,"json","PgJsonb")}build(e){return new Ui(e,this.config)}}i(Ei,er,"PgJsonbBuilder");var rr,nr;class Ui extends(nr=c,rr=s,nr){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}i(Ui,rr,"PgJsonb");function la(t){return new Ei(t??"")}var ir,sr;class $i extends(sr=m,ir=s,sr){constructor(e){super(e,"array","PgLine")}build(e){return new Oi(e,this.config)}}i($i,ir,"PgLineBuilder");var ar,or;class Oi extends(or=c,ar=s,or){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n),Number.parseFloat(a)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}i(Oi,ar,"PgLine");var ur,lr;class ji extends(lr=m,ur=s,lr){constructor(e){super(e,"json","PgLineABC")}build(e){return new Xi(e,this.config)}}i(ji,ur,"PgLineABCBuilder");var cr,mr;class Xi extends(mr=c,cr=s,mr){getSQLType(){return"line"}mapFromDriverValue(e){const[r,n,a]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(n),c:Number.parseFloat(a)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}i(Xi,cr,"PgLineABC");function ca(t,e){const{name:r,config:n}=T(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new $i(r):new ji(r)}var dr,gr;class Gi extends(gr=m,dr=s,gr){constructor(e){super(e,"string","PgMacaddr")}build(e){return new Ki(e,this.config)}}i(Gi,dr,"PgMacaddrBuilder");var pr,fr;class Ki extends(fr=c,pr=s,fr){getSQLType(){return"macaddr"}}i(Ki,pr,"PgMacaddr");function ma(t){return new Gi(t??"")}var hr,yr;class Ri extends(yr=m,hr=s,yr){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Ji(e,this.config)}}i(Ri,hr,"PgMacaddr8Builder");var br,Sr;class Ji extends(Sr=c,br=s,Sr){getSQLType(){return"macaddr8"}}i(Ji,br,"PgMacaddr8");function da(t){return new Ri(t??"")}var Nr,Tr;class Wi extends(Tr=m,Nr=s,Tr){constructor(e,r,n){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=n}build(e){return new Hi(e,this.config)}}i(Wi,Nr,"PgNumericBuilder");var Pr,wr;class Hi extends(wr=c,Pr=s,wr){constructor(r,n){super(r,n);i(this,"precision");i(this,"scale");this.precision=n.precision,this.scale=n.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}i(Hi,Pr,"PgNumeric");function L(t,e){const{name:r,config:n}=T(t,e);return new Wi(r,n==null?void 0:n.precision,n==null?void 0:n.scale)}var Ir,xr;class Yi extends(xr=m,Ir=s,xr){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Zi(e,this.config)}}i(Yi,Ir,"PgPointTupleBuilder");var Dr,Cr;class Zi extends(Cr=c,Dr=s,Cr){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(n)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}i(Zi,Dr,"PgPointTuple");var _r,Vr;class ki extends(Vr=m,_r=s,Vr){constructor(e){super(e,"json","PgPointObject")}build(e){return new es(e,this.config)}}i(ki,_r,"PgPointObjectBuilder");var Br,Ar;class es extends(Ar=c,Br=s,Ar){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,n]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(n)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}i(es,Br,"PgPointObject");function ga(t,e){const{name:r,config:n}=T(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new Yi(r):new ki(r)}function pa(t){const e=[];for(let r=0;r<t.length;r+=2)e.push(Number.parseInt(t.slice(r,r+2),16));return new Uint8Array(e)}function se(t,e){const r=new ArrayBuffer(8),n=new DataView(r);for(let a=0;a<8;a++)n.setUint8(a,t[e+a]);return n.getFloat64(0,!0)}function ts(t){const e=pa(t);let r=0;const n=e[r];r+=1;const a=new DataView(e.buffer),o=a.getUint32(r,n===1);if(r+=4,o&536870912&&(a.getUint32(r,n===1),r+=4),(o&65535)===1){const l=se(e,r);r+=8;const g=se(e,r);return r+=8,[l,g]}throw new Error("Unsupported geometry type")}var zr,vr;class rs extends(vr=m,zr=s,vr){constructor(e){super(e,"array","PgGeometry")}build(e){return new ns(e,this.config)}}i(rs,zr,"PgGeometryBuilder");var Fr,Lr;class ns extends(Lr=c,Fr=s,Lr){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return ts(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}i(ns,Fr,"PgGeometry");var Mr,Qr;class is extends(Qr=m,Mr=s,Qr){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new ss(e,this.config)}}i(is,Mr,"PgGeometryObjectBuilder");var qr,Er;class ss extends(Er=c,qr=s,Er){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=ts(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}i(ss,qr,"PgGeometryObject");function fa(t,e){const{name:r,config:n}=T(t,e);return!(n!=null&&n.mode)||n.mode==="tuple"?new rs(r):new is(r)}var Ur,$r;class as extends($r=m,Ur=s,$r){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new os(e,this.config)}}i(as,Ur,"PgRealBuilder");var Or,jr;class os extends(jr=c,Or=s,jr){constructor(r,n){super(r,n);i(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}i(os,Or,"PgReal");function ha(t){return new as(t??"")}var Xr,Gr;class us extends(Gr=m,Xr=s,Gr){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new ls(e,this.config)}}i(us,Xr,"PgSerialBuilder");var Kr,Rr;class ls extends(Rr=c,Kr=s,Rr){getSQLType(){return"serial"}}i(ls,Kr,"PgSerial");function F(t){return new us(t??"")}var Jr,Wr;class cs extends(Wr=M,Jr=s,Wr){constructor(e){super(e,"number","PgSmallInt")}build(e){return new ms(e,this.config)}}i(cs,Jr,"PgSmallIntBuilder");var Hr,Yr;class ms extends(Yr=c,Hr=s,Yr){constructor(){super(...arguments);i(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}i(ms,Hr,"PgSmallInt");function ya(t){return new cs(t??"")}var Zr,kr;class ds extends(kr=m,Zr=s,kr){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new gs(e,this.config)}}i(ds,Zr,"PgSmallSerialBuilder");var en,tn;class gs extends(tn=c,en=s,tn){getSQLType(){return"smallserial"}}i(gs,en,"PgSmallSerial");function ba(t){return new ds(t??"")}var rn,nn;class ps extends(nn=m,rn=s,nn){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new fs(e,this.config)}}i(ps,rn,"PgTextBuilder");var sn,an;class fs extends(an=c,sn=s,an){constructor(){super(...arguments);i(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}i(fs,sn,"PgText");function f(t,e={}){const{name:r,config:n}=T(t,e);return new ps(r,n)}var on,un;class hs extends(un=v,on=s,un){constructor(e,r,n){super(e,"string","PgTime"),this.withTimezone=r,this.precision=n,this.config.withTimezone=r,this.config.precision=n}build(e){return new ys(e,this.config)}}i(hs,on,"PgTimeBuilder");var ln,cn;class ys extends(cn=c,ln=s,cn){constructor(r,n){super(r,n);i(this,"withTimezone");i(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(ys,ln,"PgTime");function Sa(t,e={}){const{name:r,config:n}=T(t,e);return new hs(r,n.withTimezone??!1,n.precision)}var mn,dn;class bs extends(dn=v,mn=s,dn){constructor(e,r,n){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Ss(e,this.config)}}i(bs,mn,"PgTimestampBuilder");var gn,pn;class Ss extends(pn=c,gn=s,pn){constructor(r,n){super(r,n);i(this,"withTimezone");i(this,"precision");i(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));i(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ss,gn,"PgTimestamp");var fn,hn;class Ns extends(hn=v,fn=s,hn){constructor(e,r,n){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=n}build(e){return new Ts(e,this.config)}}i(Ns,fn,"PgTimestampStringBuilder");var yn,bn;class Ts extends(bn=c,yn=s,bn){constructor(r,n){super(r,n);i(this,"withTimezone");i(this,"precision");this.withTimezone=n.withTimezone,this.precision=n.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}i(Ts,yn,"PgTimestampString");function C(t,e={}){const{name:r,config:n}=T(t,e);return(n==null?void 0:n.mode)==="string"?new Ns(r,n.withTimezone??!1,n.precision):new bs(r,(n==null?void 0:n.withTimezone)??!1,n==null?void 0:n.precision)}var Sn,Nn;class Ps extends(Nn=m,Sn=s,Nn){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(O`gen_random_uuid()`)}build(e){return new ws(e,this.config)}}i(Ps,Sn,"PgUUIDBuilder");var Tn,Pn;class ws extends(Pn=c,Tn=s,Pn){getSQLType(){return"uuid"}}i(ws,Tn,"PgUUID");function Na(t){return new Ps(t??"")}var wn,In;class Is extends(In=m,wn=s,In){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new xs(e,this.config)}}i(Is,wn,"PgVarcharBuilder");var xn,Dn;class xs extends(Dn=c,xn=s,Dn){constructor(){super(...arguments);i(this,"length",this.config.length);i(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}i(xs,xn,"PgVarchar");function Ta(t,e={}){const{name:r,config:n}=T(t,e);return new Is(r,n)}var Cn,_n;class Ds extends(_n=m,Cn=s,_n){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Cs(e,this.config)}}i(Ds,Cn,"PgBinaryVectorBuilder");var Vn,Bn;class Cs extends(Bn=c,Vn=s,Bn){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}i(Cs,Vn,"PgBinaryVector");function Pa(t,e){const{name:r,config:n}=T(t,e);return new Ds(r,n)}var An,zn;class _s extends(zn=m,An=s,zn){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new Vs(e,this.config)}}i(_s,An,"PgHalfVectorBuilder");var vn,Fn;class Vs extends(Fn=c,vn=s,Fn){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}i(Vs,vn,"PgHalfVector");function wa(t,e){const{name:r,config:n}=T(t,e);return new _s(r,n)}var Ln,Mn;class Bs extends(Mn=m,Ln=s,Mn){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new As(e,this.config)}}i(Bs,Ln,"PgSparseVectorBuilder");var Qn,qn;class As extends(qn=c,Qn=s,qn){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}i(As,Qn,"PgSparseVector");function Ia(t,e){const{name:r,config:n}=T(t,e);return new Bs(r,n)}var En,Un;class zs extends(Un=m,En=s,Un){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new vs(e,this.config)}}i(zs,En,"PgVectorBuilder");var $n,On;class vs extends(On=c,$n=s,On){constructor(){super(...arguments);i(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(n=>Number.parseFloat(n))}}i(vs,$n,"PgVector");function xa(t,e){const{name:r,config:n}=T(t,e);return new zs(r,n)}function Da(){return{bigint:Zs,bigserial:ks,boolean:ea,char:ta,cidr:ra,customType:na,date:ia,doublePrecision:sa,inet:aa,integer:z,interval:oa,json:ua,jsonb:la,line:ca,macaddr:ma,macaddr8:da,numeric:L,point:ga,geometry:fa,real:ha,serial:F,smallint:ya,smallserial:ba,text:f,time:Sa,timestamp:C,uuid:Na,varchar:Ta,bit:Pa,halfvec:wa,sparsevec:Ia,vector:xa}}const Y=Symbol.for("drizzle:PgInlineForeignKeys"),ae=Symbol.for("drizzle:EnableRLS");var jn,Xn,Gn,Kn,Rn;class X extends(Rn=I,Kn=s,Gn=Y,Xn=ae,jn=I.Symbol.ExtraConfigBuilder,Rn){constructor(){super(...arguments);i(this,Gn,[]);i(this,Xn,!1);i(this,jn)}}i(X,Kn,"PgTable"),i(X,"Symbol",Object.assign({},I.Symbol,{InlineForeignKeys:Y,EnableRLS:ae}));function Ca(t,e,r,n,a=t){const o=new X(t,n,a),l=typeof e=="function"?e(Da()):e,g=Object.fromEntries(Object.entries(l).map(([u,D])=>{const p=D;p.setName(u);const N=p.build(o);return o[Y].push(...p.buildForeignKeys(N,o)),[u,N]})),d=Object.fromEntries(Object.entries(l).map(([u,D])=>{const p=D;p.setName(u);const N=p.buildExtraConfigColumn(o);return[u,N]})),h=Object.assign(o,g);return h[I.Symbol.Columns]=g,h[I.Symbol.ExtraConfigColumns]=d,Object.assign(h,{enableRLS:()=>(h[X.Symbol.EnableRLS]=!0,h)})}const Q=(t,e,r)=>Ca(t,e,r,void 0),y={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function b(t,e){return e.includes(t.columnType)}function _a(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const Va=w.union([w.string(),w.number(),w.boolean(),w.null()]),Ba=w.union([Va,w.record(w.any()),w.array(w.any())]),Aa=w.custom(t=>t instanceof Buffer);function Fs(t,e){const r=(e==null?void 0:e.zodInstance)??w,n=(e==null?void 0:e.coerce)??{};let a;return _a(t)&&(a=t.enumValues.length?r.enum(t.enumValues):r.string()),a||(b(t,["PgGeometry","PgPointTuple"])?a=r.tuple([r.number(),r.number()]):b(t,["PgGeometryObject","PgPointObject"])?a=r.object({x:r.number(),y:r.number()}):b(t,["PgHalfVector","PgVector"])?(a=r.array(r.number()),a=t.dimensions?a.length(t.dimensions):a):b(t,["PgLine"])?a=r.tuple([r.number(),r.number(),r.number()]):b(t,["PgLineABC"])?a=r.object({a:r.number(),b:r.number(),c:r.number()}):b(t,["PgArray"])?(a=r.array(Fs(t.baseColumn,r)),a=t.size?a.length(t.size):a):t.dataType==="array"?a=r.array(r.any()):t.dataType==="number"?a=za(t,r,n):t.dataType==="bigint"?a=va(t,r,n):t.dataType==="boolean"?a=n===!0||n.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?a=n===!0||n.date?r.coerce.date():r.date():t.dataType==="string"?a=Fa(t,r,n):t.dataType==="json"?a=Ba:t.dataType==="custom"?a=r.any():t.dataType==="buffer"&&(a=Aa)),a||(a=r.any()),a}function za(t,e,r){let n=t.getSQLType().includes("unsigned"),a,o,l=!1;b(t,["MySqlTinyInt","SingleStoreTinyInt"])?(a=n?0:y.INT8_MIN,o=n?y.INT8_UNSIGNED_MAX:y.INT8_MAX,l=!0):b(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(a=n?0:y.INT16_MIN,o=n?y.INT16_UNSIGNED_MAX:y.INT16_MAX,l=!0):b(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(a=n?0:y.INT24_MIN,o=n?y.INT24_UNSIGNED_MAX:y.INT24_MAX,l=b(t,["MySqlMediumInt","SingleStoreMediumInt"])):b(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(a=n?0:y.INT32_MIN,o=n?y.INT32_UNSIGNED_MAX:y.INT32_MAX,l=!0):b(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(a=n?0:y.INT48_MIN,o=n?y.INT48_UNSIGNED_MAX:y.INT48_MAX):b(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(n=n||b(t,["MySqlSerial","SingleStoreSerial"]),a=n?0:Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER,l=!0):b(t,["MySqlYear","SingleStoreYear"])?(a=1901,o=2155,l=!0):(a=Number.MIN_SAFE_INTEGER,o=Number.MAX_SAFE_INTEGER);let g=r===!0||r!=null&&r.number?e.coerce.number():e.number();return g=g.min(a).max(o),l?g.int():g}function va(t,e,r){const n=t.getSQLType().includes("unsigned"),a=n?0n:y.INT64_MIN,o=n?y.INT64_UNSIGNED_MAX:y.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(a).max(o)}function Fa(t,e,r){if(b(t,["PgUUID"]))return e.string().uuid();let n,a,o=!1;b(t,["PgVarchar","SQLiteText"])?n=t.length:b(t,["MySqlVarChar","SingleStoreVarChar"])?n=t.length??y.INT16_UNSIGNED_MAX:b(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?n=y.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?n=y.INT24_UNSIGNED_MAX:t.textType==="text"?n=y.INT16_UNSIGNED_MAX:n=y.INT8_UNSIGNED_MAX),b(t,["PgChar","MySqlChar","SingleStoreChar"])&&(n=t.length,o=!0),b(t,["PgBinaryVector"])&&(a=/^[01]+$/,n=t.dimensions);let l=r===!0||r!=null&&r.string?e.coerce.string():e.string();return l=a?l.regex(a):l,n&&o?l.length(n):n?l.max(n):l}function Ls(t){return ii(t)?Hs(t):Ys(t)}function Ms(t,e,r,n){const a={};for(const[o,l]of Object.entries(t)){if(!P(l,A)&&!P(l,S)&&!P(l,S.Aliased)&&typeof l=="object"){const D=ii(l)||Ws(l)?Ls(l):l;a[o]=Ms(D,e[o]??{},r,n);continue}const g=e[o];if(g!==void 0&&typeof g!="function"){a[o]=g;continue}const d=P(l,A)?l:void 0,h=d?Fs(d,n):w.any(),u=typeof g=="function"?g(h):h;r.never(d)||(a[o]=u,d&&(r.nullable(d)&&(a[o]=a[o].nullable()),r.optional(d)&&(a[o]=a[o].optional())))}return w.object(a)}const La={never:t=>{var e,r;return((e=t==null?void 0:t.generated)==null?void 0:e.type)==="always"||((r=t==null?void 0:t.generatedIdentity)==null?void 0:r.type)==="always"},optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},q=(t,e)=>{const r=Ls(t);return Ms(r,{},La)},E=Q("users",{id:F("id").primaryKey(),username:f("username").notNull().unique(),password:f("password").notNull(),firstName:f("first_name").notNull().default(""),lastName:f("last_name").notNull().default(""),phoneNumber:f("phone_number").notNull().default(""),email:f("email").notNull().unique().default(""),bio:f("bio"),authUserId:f("auth_user_id").unique(),createdAt:C("created_at",{withTimezone:!0,mode:"date"}).defaultNow()}),Qs=Q("trips",{id:F("id").primaryKey(),userId:z("user_id").notNull().references(()=>E.id),name:f("name").notNull(),description:f("description"),createdAt:C("created_at",{withTimezone:!0,mode:"date"}).defaultNow()}),Ma=Q("expenses",{id:F("id").primaryKey(),userId:z("user_id").notNull().references(()=>E.id),type:f("type").notNull(),date:f("date").notNull(),vendor:f("vendor").notNull(),location:f("location").notNull(),cost:L("cost",{precision:10,scale:2}).notNull(),comments:f("comments"),tripName:f("trip_name").notNull(),receiptPath:f("receipt_path"),status:f("status").default("complete"),ocrError:f("ocr_error"),createdAt:C("created_at",{withTimezone:!0,mode:"date"}).defaultNow(),updatedAt:C("updated_at",{withTimezone:!0,mode:"date"}).defaultNow()}),Qa=Z("entry_method",["manual","ocr"]),qa=Z("task_type",["batch_upload","expense_export","receipt_ocr"]),Ea=Z("task_status",["pending","processing","completed","failed"]),Ua=Q("background_tasks",{id:F("id").primaryKey(),userId:z("user_id").notNull().references(()=>E.id,{onDelete:"cascade"}),type:qa("type").notNull(),status:Ea("status").notNull().default("pending"),result:f("result"),error:f("error"),createdAt:C("created_at",{withTimezone:!0,mode:"date"}).defaultNow(),updatedAt:C("updated_at",{withTimezone:!0,mode:"date"}).defaultNow()}),$a=Q("mileage_logs",{id:F("id").primaryKey(),userId:z("user_id").notNull().references(()=>E.id,{onDelete:"cascade"}),tripId:z("trip_id").references(()=>Qs.id,{onDelete:"set null"}),tripDate:C("trip_date",{withTimezone:!0,mode:"date"}).notNull(),startOdometer:L("start_odometer",{precision:10,scale:1}).notNull(),endOdometer:L("end_odometer",{precision:10,scale:1}).notNull(),calculatedDistance:L("calculated_distance",{precision:10,scale:1}).notNull(),purpose:f("purpose"),startImageUrl:f("start_image_url"),endImageUrl:f("end_image_url"),entryMethod:Qa("entry_method").notNull(),createdAt:C("created_at",{withTimezone:!0,mode:"date"}).defaultNow(),updatedAt:C("updated_at",{withTimezone:!0,mode:"date"}).defaultNow()});q(E).pick({username:!0,password:!0,firstName:!0,lastName:!0,phoneNumber:!0,email:!0});const Ka=q(Qs).pick({name:!0,description:!0});q(Ma).pick({type:!0,date:!0,vendor:!0,location:!0,cost:!0,comments:!0,tripName:!0,receiptPath:!0,status:!0});q(Ua).pick({userId:!0,type:!0,status:!0,result:!0,error:!0});const Oa=q($a).pick({tripId:!0,tripDate:!0,startOdometer:!0,endOdometer:!0,purpose:!0,entryMethod:!0}),ja=Oa.extend({startOdometer:w.number().positive("Start odometer must be positive"),endOdometer:w.number().positive("End odometer must be positive"),tripId:w.number().int().positive().optional()}),Ra=ja.refine(t=>t.endOdometer>t.startOdometer,{message:"End odometer reading must be greater than start odometer reading",path:["endOdometer"]});export{Ra as a,Ka as i};
