import{r as p,j as e}from"./ui-components-HGHSQozB.js";import{F,b as m,c as u,a as h,d as x,I as b,f,t as S}from"./input-CRt7uJVD.js";import{u as y}from"./form-libs-rs9Sv7dn.js";import{D as v,a as C,b as D,c as E,d as w,e as N}from"./dialog-C5mG64l5.js";import{u as k,B as j}from"./button-DIi07IbY.js";import{T as q}from"./textarea-_oBjrA3M.js";import{u as I,a as U,q as B}from"./index-DigxZtx1.js";import{i as L}from"./schema-D93SEq94.js";import{L as M}from"./loader-circle-DRr2b1ki.js";import"./data-fetching-CsvQ4U53.js";import"./react-vendor-BDjHMAeo.js";import"./auth-DQqL1F4Z.js";const O=L.pick({name:!0,description:!0});function X(){const{editTripOpen:a,editingTrip:i,toggleEditTrip:o}=I(),{toast:n}=k(),[c,l]=p.useState(!1),s=y({resolver:S(O),defaultValues:{name:"",description:""}});p.useEffect(()=>{a&&i?s.reset({name:i.name,description:i.description||""}):a||s.reset({name:"",description:""})},[a,i,s]);const g=async r=>{if(i){l(!0);try{const t=await U("PUT",`/api/trips/${i.id}`,r);if(!t.ok){const T=await t.text();throw new Error(T||"Failed to update trip")}o(),B.invalidateQueries({queryKey:["/api/trips"]}),n({title:"Trip Updated",description:"Trip details have been updated successfully."})}catch(t){n({title:"Error Updating Trip",description:t instanceof Error?t.message:"An unknown error occurred",variant:"destructive"})}finally{l(!1)}}},d=()=>{o()};return e.jsx(v,{open:a,onOpenChange:r=>{r||d()},children:e.jsxs(C,{className:"max-w-md",children:[e.jsxs(D,{children:[e.jsx(E,{children:"Edit Trip"}),e.jsx(w,{children:"Update the details for your trip."})]}),e.jsx(F,{...s,children:e.jsxs("form",{onSubmit:s.handleSubmit(g),className:"space-y-4",children:[e.jsx(m,{control:s.control,name:"name",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Trip Name"}),e.jsx(x,{children:e.jsx(b,{placeholder:"e.g., Summer Vacation, Business Conference",...r})}),e.jsx(f,{})]})}),e.jsx(m,{control:s.control,name:"description",render:({field:r})=>e.jsxs(u,{children:[e.jsx(h,{children:"Description (Optional)"}),e.jsx(x,{children:e.jsx(q,{placeholder:"Add a short description for this trip",className:"min-h-[60px]",...r,value:r.value??""})}),e.jsx(f,{})]})}),e.jsxs(N,{children:[e.jsx(j,{type:"button",variant:"outline",onClick:d,children:"Cancel"}),e.jsx(j,{type:"submit",disabled:c,children:c?e.jsxs(e.Fragment,{children:[e.jsx(M,{className:"mr-2 h-4 w-4 animate-spin"})," Saving..."]}):"Save Changes"})]})]})})]})})}export{X as default};
